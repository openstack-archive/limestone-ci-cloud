---

- job:
    name: limestone-ci-deploy
    description: |
      Run openstack-ansible to deploy the Limestone Networks
      CI cloud
    pre-run: .zuul.d/playbooks-deploy/pre.yml
    run: .zuul.d/playbooks-deploy/run.yml
    post-run: .zuul.d/playbooks-deploy/post.yml
    allowed-projects:
      - openstack/limestone-ci-cloud
    vars:
      vault_key_path: "{{ ansible_user_dir }}/.vault"
      ssh_agent_sock: "{{ ansible_user_dir }}/.ssh-agent.sock"
    secrets:
      - name: ssh_key_secret
        secret: limestone_ci_ssh_key
      - name: vault_secret
        secret: limestone_ci_vault
